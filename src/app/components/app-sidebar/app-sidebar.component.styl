// Variables
$sidebar-width = 240px
$sidebar-compact-width = 64px
$sidebar-bg-color = var(--p-menu-background, #f8f9fa)
$sidebar-dark-bg-color = var(--p-surface-900, #1e1e1e)
$sidebar-border-color = var(--p-surface-border, #e9ecef)
$sidebar-item-hover-bg = var(--p-surface-hover, #e9ecef)
$sidebar-item-active-bg = var(--p-surface-100, #e9ecef)
$sidebar-item-active-border = var(--p-primary-color, #3B82F6)
$text-color = var(--p-text-color, #495057)
$text-muted = var(--p-text-color-secondary, #6c757d)
$primary-color = var(--p-primary-color, #3B82F6)
$transition-duration = 0.3s

// Sidebar Container
.sidebar-container
  display: flex
  flex-direction: column
  background-color: $sidebar-bg-color
  height: 100%
  width: $sidebar-width
  position: relative
  border-right: 1px solid $sidebar-border-color
  overflow-x: hidden
  z-index: 1000
  
  // Improved transition properties
  transition-property: width, transform, margin-left
  transition-duration: $transition-duration
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1)
  
  // Performance optimizations for smoother animations
  will-change: transform, width
  transform: translateZ(0)
  backface-visibility: hidden
  
  &.sidebar-fixed
    position: fixed
    top: 0
    left: 0
    height: 100vh
  
  &.sidebar-compact
    width: $sidebar-compact-width
    
    .menu-label, .menu-badge, .submenu-icon
      display: none
    
    .menu-icon
      margin-right: 0
  
  &.sidebar-mobile
    position: fixed
    top: 0
    left: 0
    height: 100vh
    z-index: 1100
    transform: translateX(-100%)
    width: $sidebar-width
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1)
    
    &.sidebar-visible
      transform: translateX(0)

  
    
// Sidebar Header
.sidebar-header
  display: flex
  align-items: center
  padding: 1rem
  height: 64px
  border-bottom: 1px solid $sidebar-border-color
  position: relative
  
  .toggle-button
    position: absolute
    right: 8px
    top: 50%
    transform: translateY(-50%)
    width: 24px
    height: 24px
    display: flex
    align-items: center
    justify-content: center
    border-radius: 50%
    cursor: pointer
    background-color: transparent
    
    &:hover
      background-color: $sidebar-item-hover-bg
    
    i
      font-size: 0.85rem
      color: $text-muted
  
  .logo-container
    display: flex
    align-items: center
    
    .wipo-logo
      height: 32px
      margin-right: 0.75rem
    
    .app-name
      font-weight: 600
      color: $text-color
      white-space: nowrap

// Menu Structure
.sidebar-menu
  flex: 1
  overflow-y: auto
  padding: 0.5rem 0
  
  .menu-list
    list-style: none
    padding: 0
    margin: 0
    
    .menu-item
      position: relative
      
      &.menu-item-active
        > .menu-link
          background-color: $sidebar-item-active-bg
          
          &::before
            content: ''
            position: absolute
            left: 0
            top: 0
            height: 100%
            width: 3px
            background-color: $primary-color
      
      .menu-link
        display: flex
        align-items: center
        padding: 0.75rem 1rem
        color: $text-color
        text-decoration: none
        position: relative
        transition: background-color 0.2s ease
        
        &:hover
          background-color: $sidebar-item-hover-bg
        
        &.active-route
          background-color: $sidebar-item-active-bg
          
          &::before
            content: ''
            position: absolute
            left: 0
            top: 0
            height: 100%
            width: 3px
            background-color: $primary-color
        
        .menu-icon
          font-size: 1.25rem
          margin-right: 0.75rem
          width: 24px
          text-align: center
        
        .menu-label
          flex: 1
          white-space: nowrap
          overflow: hidden
          text-overflow: ellipsis
        
        .menu-badge
          padding: 0.125rem 0.5rem
          font-size: 0.75rem
          border-radius: 10px
          background-color: $primary-color
          color: white
          margin-left: 0.5rem
        
        .submenu-icon
          margin-left: 0.5rem
          font-size: 0.85rem
          transition: transform 0.2s ease
          
          &.submenu-expanded
            transform: rotate(180deg)

// Submenu Structure
.submenu
  overflow: hidden
  transition: max-height 0.3s ease
  
  .submenu-list
    list-style: none
    padding: 0
    margin: 0
    
    .submenu-item
      .submenu-link
        display: flex
        align-items: center
        padding: 0.5rem 1rem 0.5rem 2.5rem
        color: $text-color
        text-decoration: none
        transition: background-color 0.2s ease
        
        &:hover
          background-color: $sidebar-item-hover-bg
        
        &.active-route
          background-color: $sidebar-item-active-bg
          
          &::before
            content: ''
            position: absolute
            left: 0
            top: 0
            height: 100%
            width: 3px
            background-color: $primary-color
        
        .submenu-icon
          font-size: 1rem
          margin-right: 0.75rem
          width: 20px
          text-align: center
        
        .submenu-label
          flex: 1
          white-space: nowrap
          overflow: hidden
          text-overflow: ellipsis
        
        .submenu-badge
          padding: 0.125rem 0.5rem
          font-size: 0.75rem
          border-radius: 10px
          background-color: $primary-color
          color: white
          margin-left: 0.5rem

// Compact hover menu - shown when hovering items in compact mode
.compact-hover-menu
  position: fixed
  left: $sidebar-compact-width
  background-color: $sidebar-bg-color
  border: 1px solid $sidebar-border-color
  border-left: none
  box-shadow: 4px 0 10px rgba(0, 0, 0, 0.1)
  min-width: 200px
  max-width: 240px
  z-index: 1050
  border-radius: 0 4px 4px 0
  display: none

// Sidebar footer for mobile view
.sidebar-footer
  padding: 1rem
  border-top: 1px solid $sidebar-border-color
  display: flex
  justify-content: center
  
  button
    width: 100%
    display: flex
    align-items: center
    justify-content: center
    
    i
      margin-right: 0.5rem